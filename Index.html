<div id="weather-widget" style="
  max-width: 220px;
  background: #f9eaf7; /* rose pastel */
  border-radius: 12px;
  padding: 15px 20px;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  color: #5a3e65;
  box-shadow: 0 4px 8px rgba(90, 62, 101, 0.2);
  text-align: center;
">
  <h3 style="margin-bottom: 10px; font-weight: 600;">Météo locale</h3>
  <p id="city" style="font-size: 1.2em; margin: 5px 0;">Chargement...</p>
  <p id="temp" style="font-size: 2em; margin: 5px 0; font-weight: 700;"></p>
  <p id="desc" style="font-size: 1em; font-style: italic; margin: 5px 0;"></p>
</div>

<script>
  const apiKey = 'TA_CLE_API_ICI'; // Remplace par ta clé API OpenWeatherMap

  async function fetchWeatherByCoords(lat, lon) {
    try {
      const url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&units=metric&lang=fr&appid=${apiKey}`;
      const res = await fetch(url);
      if (!res.ok) throw new Error('Erreur API météo');
      const data = await res.json();

      document.getElementById('city').innerText = data.name;
      document.getElementById('temp').innerText = `${Math.round(data.main.temp)} °C`;
      document.getElementById('desc').innerText = data.weather[0].description;
    } catch (err) {
      document.getElementById('city').innerText = 'Erreur météo';
      document.getElementById('temp').innerText = '--';
      document.getElementById('desc').innerText = '';
      console.error(err);
    }
  }

  function requestLocation() {
    if (!navigator.geolocation) {
      document.getElementById('city').innerText = 'Géolocalisation non supportée';
      return;
    }

    navigator.geolocation.getCurrentPosition(
      (position) => {
        fetchWeatherByCoords(position.coords.latitude, position.coords.longitude);
      },
      (error) => {
        document.getElementById('city').innerText = 'Position refusée';
        document.getElementById('temp').innerText = '--';
        document.getElementById('desc').innerText = '';
        console.warn(error);
      }
    );
  }

  requestLocation();
</script>
